<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width,user-scalable=no">
    <meta charset="utf-8">
    <title>Elevation Test</title>
</head>
<body>

<div id="map" style="position: fixed; top: 0;left:0; width:100%; height:100%;"></div>
<script src='https://apis.daum.net/maps/maps3.js?apikey=3a71cb1d39404e9bea87c4897f5cb29c&autoload=false'></script>
<script>
    alert('test');
    var gpsLogList = [],
        golfclubSeq = null,
        step = 0;

    function debugInit() {
        userSetting.init();
        dbManager.init().then(function() {
            if (!golfclubSeq) {
                golfclubSeq = 10724; //군산CC
                //golfclubSeq = 10505; //안성Q
            }
            yardage.initialize(golfclubSeq).then(function() {
                navigation.init().then(function() {
                });
                mapInit();
            });
        });
    }


    var map,
        marker;

    setTimeout(function(){
        daum.maps.load(function() {
            console.log('map loaded!!');
            mapInit();
            //debugInit();
        });
     }, 500);


    function displayMarker(locPosition, message) {

        // 마커를 생성합니다
        var marker = new daum.maps.Marker({  
            map: map, 
            position: locPosition
        }); 

        var iwContent = message, // 인포윈도우에 표시할 내용
        iwRemoveable = true;

        // 인포윈도우를 생성합니다
        var infowindow = new daum.maps.InfoWindow({
            content : iwContent,
            removable : iwRemoveable
        });

        // 인포윈도우를 마커위에 표시합니다 
        infowindow.open(map, marker);

        // 지도 중심좌표를 접속위치로 변경합니다
        map.setCenter(locPosition);      
    }     

    function mapInit() {
        var container = document.getElementById('map'),
            options = { //지도를 생성할 때 필요한 기본 옵션
                center: new daum.maps.LatLng(35.89463108012687, 126.65533072177357), //군산 CC
                //center: new daum.maps.LatLng(37.045948, 127.388694), //안성 Q.
                level: 3 //지도의 레벨(확대, 축소 정도)
            };


        map = new daum.maps.Map(container, options);
        var mapTypeCntrl = new daum.maps.MapTypeControl();
        map.addControl(mapTypeCntrl, daum.maps.ControlPosition.TOPRIGHT);
        marker = new daum.maps.Marker({
            // 지도 중심좌표에 마커를 생성합니다.
            position: map.getCenter()
        });
        marker.setMap(map);
        
        if (navigator.geolocation) {

            // GeoLocation을 이용해서 접속 위치를 얻어옵니다
            navigator.geolocation.getCurrentPosition(function(position) {
                var lat = position.coords.latitude, // 위도
                    lon = position.coords.longitude; // 경도
                var locPosition = new daum.maps.LatLng(lat, lon), // 마커가 표시될 위치를 geolocation으로 얻어온 좌표로 생성합니다
                    message = '<div style="padding:5px;">여기에 계신가요?!</div>'; // 인포윈도우에 표시될 내용입니다
                // 마커와 인포윈도우를 표시합니다
                displayMarker(locPosition, message);
            });
        }

        
                // Elevation
                //$http.get('./js/zdata/ansung-q-elevation.json').then(function(rs) {
                //    var elevation = rs.data.resultSet[0].elevation_data_set;
                //
                //    angular.forEach(elevation, function(val) {
                //        var circle = new daum.maps.Circle({
                //            center : new daum.maps.LatLng(val.elevation_x, val.elevation_y),  // 원의 중심좌표 입니다
                //            radius: 5, // 미터 단위의 원의 반지름입니다
                //            strokeWeight: 1, // 선의 두께입니다
                //            strokeColor: 'red', // 선의 색깔입니다
                //            strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
                //            strokeStyle: 'solid' // 선의 스타일 입니다
                //        });
                //        circle.setMap(map);
                //    });
                //
                //    var aa  = '37.044240,127.385110,324.581|37.044330,127.385300,320.003|37.044430,127.385490,315.376|37.044580,127.385380,316.242|37.044730,127.385260,318.594|37.044370,127.385800,310.671|37.044520,127.385690,310.773|37.044670,127.385570,313.164|37.044830,127.385450,315.576|37.044980,127.385330,317.887|37.044310,127.386110,307.902|37.044460,127.385990,307.433|37.044610,127.385880,308.158|37.044770,127.385760,310.187|37.044920,127.385640,312.612|37.045070,127.385530,314.797|37.045230,127.385410,317.291|37.045380,127.385290,321.072|37.044400,127.386300,304.628|37.044550,127.386190,304.367|37.044710,127.386070,306.142|37.044860,127.385950,307.972|37.045010,127.385840,309.752|37.045170,127.385720,311.973|37.045320,127.385600,315.501|37.045480,127.385490,319.340|37.045630,127.385370,323.045|37.045780,127.385250,326.597|37.045940,127.385140,329.920|37.046090,127.385020,332.735|37.044340,127.386610,301.599|37.044490,127.386500,301.126|37.044650,127.386380,302.309|37.044800,127.386260,304.026|37.044950,127.386150,305.693|37.045110,127.386030,307.583|37.045260,127.385910,310.103|37.045420,127.385800,313.874|37.045570,127.385680,317.782|37.045720,127.385560,321.562|37.045880,127.385450,325.188|37.046030,127.385330,328.408|37.046180,127.385210,331.511|37.044280,127.386920,298.144|37.044430,127.386810,297.783|37.044590,127.386690,298.271|37.044740,127.386570,300.063|37.044890,127.386460,301.713|37.045050,127.386340,303.483|37.045200,127.386220,305.314|37.045350,127.386110,308.792|37.045510,127.385990,312.695|37.045660,127.385870,316.452|37.045810,127.385750,320.224|37.045970,127.385640,323.751|37.044370,127.387120,294.362|37.044520,127.387000,294.175|37.044680,127.386880,295.912|37.044830,127.386770,297.572|37.044990,127.386650,299.378|37.045140,127.386530,301.169|37.045290,127.386410,303.986|37.045450,127.386300,307.758|37.045600,127.386180,311.515|37.045760,127.386060,315.418|37.045910,127.385950,319.023|37.046060,127.385830,322.375|37.044310,127.387430,291.376|37.044460,127.387310,291.026|37.044620,127.387190,291.809|37.044770,127.387070,293.553|37.044930,127.386960,295.228|37.045080,127.386840,297.019|37.045230,127.386720,299.058|37.045390,127.386610,302.872|37.045540,127.386490,306.589|37.045690,127.386370,310.336|37.045850,127.386260,314.108|37.046000,127.386140,317.797|37.044400,127.387620,288.113|37.044560,127.387500,288.129|37.044710,127.387380,289.806|37.044870,127.387270,291.315|37.045020,127.387150,292.868|37.045170,127.387030,294.660|37.045330,127.386920,297.995|37.045480,127.386800,301.826|37.045630,127.386680,305.581|37.045790,127.386570,309.287|37.045940,127.386450,312.982|37.044340,127.387930,285.711|37.044500,127.387810,284.735|37.044650,127.387690,286.162|37.044800,127.387580,287.766|37.044960,127.387460,289.428|37.045110,127.387340,290.991|37.045270,127.387230,293.240|37.045420,127.387110,296.985|37.045570,127.386990,300.853|37.045730,127.386880,304.679|37.045880,127.386760,308.395|37.046030,127.386640,312.227|37.044280,127.388240,284.776|37.044440,127.388120,283.456|37.044590,127.388000,283.282|37.044740,127.387890,284.361|37.044900,127.387770,285.938|37.045050,127.387650,287.614|37.045210,127.387540,289.135|37.045360,127.387420,292.818|37.045510,127.387300,296.451|37.045670,127.387190,300.075|37.045820,127.387070,303.822|37.045970,127.386950,307.680|37.044380,127.388430,282.479|37.044530,127.388310,281.317|37.044680,127.388200,282.284|37.044840,127.388080,283.410|37.044990,127.387960,284.590|37.045140,127.387850,285.776|37.045300,127.387730,288.721|37.045450,127.387610,292.468|37.045610,127.387490,296.306|37.045760,127.387380,299.807|37.045910,127.387260,303.337|37.044160,127.388860,284.816|37.044310,127.388740,282.708|37.044470,127.388620,280.618|37.044620,127.388510,280.286|37.044780,127.388390,281.291|37.044930,127.388270,282.358|37.045080,127.388150,283.501|37.045240,127.388040,285.094|37.045390,127.387920,288.589|37.045540,127.387800,292.191|37.045700,127.387690,295.978|37.045850,127.387570,299.610|37.046010,127.387450,303.358|37.044410,127.388930,281.126|37.044560,127.388810,279.609|37.044720,127.388700,279.906|37.044870,127.388580,280.370|37.045020,127.388460,281.233|37.045180,127.388350,282.285|37.045330,127.388230,285.283|37.045490,127.388110,288.953|37.045640,127.388000,292.376|37.045790,127.387880,295.871|37.045950,127.387760,299.604|37.044960,127.388770,279.856|37.045120,127.388660,280.367|37.045270,127.388540,281.992|37.045420,127.388420,285.473|37.045580,127.388310,289.070|37.045730,127.388190,292.565|37.045890,127.388070,296.235|37.046040,127.387960,299.452|37.045360,127.388730,282.613|37.045520,127.388620,285.901|37.045670,127.388500,289.259|37.045830,127.388380,292.929|37.045980,127.388270,296.233|37.045610,127.388810,286.290|37.045760,127.388690,289.540|37.045920,127.388570,293.086|37.046010,127.388770,293.017|37.046170,127.388650,296.443|37.046100,127.388960,292.949'
                //    var tt = aa.split('|');
                //
                //    var yardageSimple = yardage.simple();
                //    var perimeterList = yardageSimple.PAMPAS.holeList[0].perimeterList;
                //
                //    angular.forEach(tt, function(val) {
                //        var gps = val.split(',');
                //        if ($window.geolib.isPointInsideWithPreparedPolygon({longitude: parseFloat(gps[1]), latitude: parseFloat(gps[0])}, perimeterList)) {
                //            var circle = new daum.maps.Circle({
                //                center : new daum.maps.LatLng(parseFloat(gps[0]), parseFloat(gps[1])),  // 원의 중심좌표 입니다
                //                radius: 5, // 미터 단위의 원의 반지름입니다
                //                strokeWeight: 1, // 선의 두께입니다
                //                strokeColor: 'blue', // 선의 색깔입니다
                //                strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
                //                strokeStyle: 'solid' // 선의 스타일 입니다
                //            });
                //            circle.setMap(map);
                //        }
                //
                //    });
                //});

                //var yardageSimple = yardage.simple();
                //
                //angular.forEach(yardageSimple.IKSAN.holeList, function(val) {
                //
                //    var sw = new daum.maps.LatLng(val.bounds.minLat, val.bounds.minLng), // 사각형 영역의 남서쪽 좌표
                //        ne = new daum.maps.LatLng(val.bounds.maxLat, val.bounds.maxLng); // 사각형 영역의 북동쪽 좌표
                //
                //    var rectangleBounds = new daum.maps.LatLngBounds(sw, ne);
                //
                //    var rectangle = new daum.maps.Rectangle({
                //        bounds: rectangleBounds, // 그려질 사각형의 영역정보입니다
                //        strokeWeight: 5, // 선의 두께입니다
                //        strokeColor: "#" + Math.round( Math.random() * 0xFFFFFF ).toString(16), // 선의 색깔입니다
                //        strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
                //        strokeStyle: 'solid', // 선의 스타일입니다
                //    });
                //
                //    rectangle.setMap(map);
                //});
            }
</script>

</body>
</html>
